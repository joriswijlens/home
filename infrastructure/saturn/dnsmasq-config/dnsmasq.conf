# dnsmasq configuration for WireGuard VPN DNS
# Provides local hostname resolution for home infrastructure

# Listen on all interfaces (WireGuard + Docker bridge)
# bind-dynamic allows binding to interfaces that appear later (e.g. wg0)
bind-dynamic

# DNS port
port=53

# Don't read /etc/resolv.conf
no-resolv

# Upstream DNS servers
# Use KPN router for local hostname resolution
server=192.168.2.254

# Fallback to Cloudflare for public DNS
server=1.1.1.1
server=1.0.0.1

# Local domain - set to .home to match KPN router
domain=home
# Automatically append domain to short hostnames
expand-hosts

# Static host entries for home infrastructure
addn-hosts=/etc/dnsmasq-hosts/hosts

# Cache settings
cache-size=1000

# Log queries for debugging (comment out in production)
log-queries
